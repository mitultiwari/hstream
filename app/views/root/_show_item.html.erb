<div class='item' hnid='<%= item.hnid %>' style='display:none'>
  <div class='contextbox'>
    <div class='shortlistClose'>x</div>
    <% if item.parent %>
      <div class='title'><%= raw item.story %></div>
    <% end %>
    <% if item.parent && item.parent.parent %>
      <div class='contextbutton'>..<%= pluralize item.ancestors.size, 'comment'%>..</div>
      <div class='context'>
        <% item.ancestors.reverse.each do |ancestor| %>
          <div class='ancestor' hnid='<%= ancestor.hnid %>'>
            <%= raw ancestor.show_contents %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>

  <div class='<%= item.parent ? "itembox" : "title"%>'>
    <%= raw item.show_contents %>
  </div>

  <div class='threadbox'>
    <%= raw item.render_thread %>
  </div>
</div>
